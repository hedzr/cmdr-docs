---
layout: single
title: "å“åº”å‡½æ•° (Actions)"
date: 2020-07-13 11:18:11 +0800
Author: hedzr
tags: [commander, command-line, "command-line-parser", command-line-interface,  getops, posix, posix-compatible, hierarchical-configuration, hierarchy, cli, golang]
categories: golang cmdr guide actions
comments: true
toc: true
header:
  overlay_image: /assets/images/cmdr/help-screen.png
  overlay_filter: rgba(128, 128, 0, 0.41)
excerpt: >-
  Guide and References for cmdr ...
#header:
#  overlay_image: /assets/images/unsplash-image-1.jpg
#  overlay_filter: rgba(0, 0, 0, 0.15)
#  caption: "Photo credit: [**Unsplash**](https://unsplash.com)"
#  actions:
#    - label: "More Info"
#      url: "https://unsplash.com"


---



# Actions



## å“åº”å‡½æ•°ï¼ˆActionï¼‰

Action å‡½æ•°å°†ä¼šæä¾›ä¸€ä¸ªå“åº”å‡½æ•°ã€‚

å½“ä¸€ä¸ªå‘½ä»¤è¢«å‘½ä¸­æ—¶ï¼Œå®ƒçš„ Action å“åº”å‡½æ•°å°†ä¼šè·å¾—æ§åˆ¶æƒã€‚

å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œä¸€æ—¦å®šä¹‰äº† Action å‡½æ•°ï¼Œé‚£ä¹ˆåº”ç”¨ç¨‹åºè¿è¡Œæ—¶å°±ä¸ä¼šè‡ªåŠ¨æ˜¾ç¤ºå¸®åŠ©å±äº†ï¼Œé™¤éä½ ä½¿ç”¨ `wget-cover --help` ï¼ˆæˆ–è€… `-h`, `-?` ç­‰ï¼‰ç­‰æ–¹å¼ï¼ˆè¿™ä¹Ÿæ˜¯ POSIX å…¼å®¹çš„æ–¹æ¡ˆï¼‰ã€‚

å¯¹äºæ ‡å¿—æ¥è¯´ï¼ŒAction ä¹Ÿå¯ä»¥è¢«ç”¨äºå“åº”ï¼Œä½†æ›´å¤šçš„æƒ…å†µæ˜¯é€šè¿‡æ ‡å¿—çš„ OnSet æ¥å®Œæˆè‡ªå®šä¹‰çš„æ ‡å¿—å€¼çš„æ ¡éªŒã€‚

```go
	cmdr.NewBool().
		Titles("background", "b", "bg").
		Description("go to background after startup").
		Group(cStartup).
		OnSet(func(keyPath string, value interface{}) {
			if value == true {
				panic("unexpected value: true")
			}
		}).
		AttachTo(root)
```

:::tip 

See Also: <https://github.com/hedzr/cmdr-examples/blob/master/examples/actions>

:::



## å…³äº `PreAction` å’Œ `PostAction`

å¯¹äº RootCommand æ¥è¯´ï¼Œé™¤äº†èƒ½å¤Ÿå®šä¹‰åº”ç”¨ç¨‹åºçº§åˆ«çš„ä¿¡æ¯ï¼Œä¾‹å¦‚ appNameï¼Œversionï¼Œbanner ç­‰ç­‰ä¹‹å¤–ï¼Œéœ€è¦æ³¨æ„çš„å°±æ˜¯å®ƒçš„ `PreAction` å’Œ `PostAction` å‡½æ•°äº†ã€‚åœ¨ RootCommand çš„  Action å‡½æ•°è¢«è°ƒç”¨ä¹‹å‰å’Œä¹‹åï¼Œè¿™ä¸¤ä¸ªå‡½æ•°ä¼šåˆ†åˆ«è·å¾—æ‰§è¡Œæ§åˆ¶æƒã€‚

å®ƒä»¬çš„ç‰¹æ®Šä¹‹å¤„åœ¨äºï¼Œå¯¹äºå­å‘½ä»¤çš„ Action å‡½æ•°è¢«æ‰§è¡Œçš„æƒ…å†µï¼Œé™¤äº†å­å‘½ä»¤çš„ PreAction å’Œ PostAction ä¼šæœ‰æœºä¼šè¢«æ‰§è¡Œä¹‹å¤–ï¼ŒRootCommand çš„ PreAction å’Œ PostAction ä¹Ÿä¼šè¢«æ‰§è¡Œã€‚æ‰€ä»¥å®ƒä»¬éšå«ç€å…¨å±€çš„å‰ç½®å’Œåç½®è°ƒç”¨çš„å«ä¹‰ã€‚



## `OnSet`

åœ¨ä¸Šæ–‡ä¸­å·²ç»æåˆ°è¿‡ `OnSet` çš„ç”¨æ³•ï¼š

```go
		OnSet(func(keyPath string, value interface{}) {
			if value == true {
				panic("unexpected value: true")
			}
		}).
```

é™¤äº†å¯ä»¥è¢«ç”¨äºå®Œæˆæ ¡éªŒä»»åŠ¡ä¹‹å¤–ï¼ŒOnSet ä¹Ÿå¯ä»¥è¢«ç”¨äºè®¾ç½®æœ‰å…³ç³»çš„å…¨å±€å˜é‡ï¼Œç¿»è½¬æŸäº›ç‰¹å®šä¸šåŠ¡é€»è¾‘ç­‰ã€‚



## More Handlers

(TODO)

Such as: AfterArgParsed, AutomaticEnvHooks, ConfigLoadedListener, CustomShowBuildInfo, CustomShowVersions, ...





ğŸ”š



