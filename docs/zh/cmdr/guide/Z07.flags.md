---
layout: single
title: "æ ‡å¿— (Flags)"
date: 2020-07-13 11:23:11 +0800
Author: hedzr
tags: [commander, command-line, "command-line-parser", command-line-interface,  getops, posix, posix-compatible, hierarchical-configuration, hierarchy, cli, golang]
categories: golang cmdr guide flags
comments: true
toc: true
header:
  overlay_image: /assets/images/cmdr/help-screen.png
  overlay_filter: rgba(128, 128, 0, 0.41)
excerpt: >-
  Guide and References for cmdr ...
#header:
#  overlay_image: /assets/images/unsplash-image-1.jpg
#  overlay_filter: rgba(0, 0, 0, 0.15)
#  caption: "Photo credit: [**Unsplash**](https://unsplash.com)"
#  actions:
#    - label: "More Info"
#      url: "https://unsplash.com"


---





# æ ‡å¿—ï¼ˆFlagsï¼‰



## ä»€ä¹ˆæ˜¯æ ‡å¿—ï¼ˆFlagï¼‰ã€é€‰é¡¹ï¼ˆOptionï¼‰

åœ¨ `cmdr` ä¸­ï¼Œæ ‡å¿—å’Œé€‰é¡¹å¸¸å¸¸æ˜¯æ··ç”¨çš„ã€‚ä½†å®ƒä»¬å¯¹äº `cmdr` æ¥è¯´ï¼Œç¡®å®æœ‰åˆ†åˆ«ã€‚

ä¸€ä¸ªæ ‡å¿—ï¼ˆFlagï¼‰ï¼ŒæŒ‡çš„æ˜¯é€šè¿‡ `cmdr.NewBool()` ç­‰æ¥å£å‡½æ•°å®šä¹‰çš„å®ä½“ï¼Œè¿™ä¸ªå®ä½“è¢«ç”¨äºå‘½ä»¤è¡Œå‚æ•°çš„è§£é‡Šï¼Œå¯¹åº”ç€ä¸€ä¸ªç‰¹å®šçš„å‘½ä»¤è¡Œå‚æ•°é€‰é¡¹ã€‚

ä¸€ä¸ªé€‰é¡¹ï¼ˆOptionï¼‰ï¼ŒæŒ‡çš„æ˜¯å‚¨å­˜åœ¨ `Option Store` ä¸­çš„ä¸€ä¸ªæ¡ç›®ï¼Œä¾‹å¦‚ `â€œapp.debugâ€ => true`ã€‚å®ƒçš„ yaml è¡¨ç¤ºèƒ½å¤Ÿä½“ç°å‡ºå±‚çº§å…³ç³»ï¼š

```yaml
app:
  debug: true
```



### å’Œ `Option Store` ç›¸é›†æˆ

ä¸€ä¸ªé€‰é¡¹å¯èƒ½å’Œä¸€ä¸ªæ ‡å¿—ç›¸å…³è”ï¼Œä½†ä¹Ÿå¯èƒ½ä¸ã€‚ä½†ä¸€ä¸ªæ ‡å¿—ä¸€å®šä¼šå¯¹åº”ç€ä¸€ä¸ªé€‰é¡¹ã€‚

å¯¹äº `app.debug` è¿™ä¸ªé€‰é¡¹æ¥è¯´ï¼Œç”±äº `app` æ˜¯å†…éƒ¨è®¾å®šçš„é€‰é¡¹å‰ç¼€ï¼ˆæ‰€ä»¥åœ¨ä½“ç°åˆ°æ ‡å¿—æ—¶ä¸äºˆè€ƒè™‘ï¼‰ï¼Œæ•…é¡¶çº§æ ‡å¿— `--debug` ä¸å…¶æ˜¯å…³è”çš„ã€‚

è€Œå¯¹äºå¤šçº§å­å‘½ä»¤çš„æ ‡å¿—ï¼Œä¾‹å¦‚ å­å‘½ä»¤ `cert / create` çš„æ ‡å¿— `--cacert`ï¼Œä¼šå¯¹åº”ç€ `app.cert.create.cacert` è¿™ä¸ªé€‰é¡¹ã€‚

å½“ä½¿ç”¨ `GetXXX` æ¥è·å–é€‰é¡¹å€¼æ—¶ï¼ŒRç‰ˆæœ¬èƒ½å¤Ÿå¿½ç•¥ `app` å‰ç¼€çš„æŒ‡å®šï¼Œä»è€Œç®€åŒ–ä½ çš„ç¼–ç¨‹æ€è·¯ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ`GetBoolR("debug")` å°†ä¼šå–å¾— `app.debug` çš„å¸ƒå°”é‡å€¼ã€‚

`app` å‰ç¼€æ˜¯ä¸ºäº†åœ¨åºåˆ—åŒ– Option Store ä¸º YAML æˆ–è€…å…¶ä»–å¤–éƒ¨æ ¼å¼æ—¶è€Œç‰¹åˆ«å»ºç«‹çš„å‰ç¼€ï¼Œè¿™æ ·èƒ½å¤Ÿä¿è¯ Option Store çš„åºåˆ—åŒ–å†…å®¹èƒ½å¤Ÿè¢«æ°å½“åœ°åŒ…å«åˆ°å¤–éƒ¨é…ç½®ä¸­å¿ƒé‡Œï¼ˆæ— è®ºæ˜¯ YAMLï¼ŒJSONï¼ŒTOMLï¼ŒæŠ‘æˆ–æ˜¯æ˜¾å¼çš„å¾®æœåŠ¡å¤–éƒ¨é…ç½®ä¸­å¿ƒï¼‰ã€‚

### keyPath

`keyPath` æ˜¯ `Option Store` ä¸­çš„ä¸“å±æ¦‚å¿µï¼Œä¸€ä¸ªé€‰é¡¹èƒ½å¤Ÿè¢«é€šè¿‡ `å‰ç¼€.å­å‘½ä»¤åºåˆ—.æ ‡å¿—é•¿æ ¼å¼` çš„æ–¹å¼è¢«è®¿é—®ï¼Œè¿™ä¸ªæ ¼å¼å°±è¢«ç§°ä½œ `keyPath`ã€‚

ä¾‹å¦‚ `app.cert.create.cacert` ä¸­ï¼Œapp æ˜¯å†…ç½®çš„å‰ç¼€ï¼Œcert.create ä»£è¡¨ç€ cert å‘½ä»¤åŠå…¶ create å­å‘½ä»¤ï¼Œcacert é™¤äº†æ˜¯æ ‡å¿—çš„é•¿æ ¼å¼å­—ä¸²ä¹‹å¤–ï¼Œä¹Ÿè¡¨è¾¾å‡ºäº†ä»å±äº cert.create å­å‘½ä»¤çš„å«ä¹‰ã€‚





## å®šä¹‰æ ‡å¿—

å¢åŠ ä¸€ä¸ªæ ‡å¿—ï¼ˆFlagï¼‰å®šä¹‰éå¸¸å®¹æ˜“ã€‚

:::tip 

See Also: <https://github.com/hedzr/cmdr-examples/blob/master/examples/flags>

:::





### Bool

```go
	cmdr.NewBool().
		Titles("version", "V").
		Description("display the version of Wget and exit").
		Group(cStartup).
		Action(func(cmd *cmdr.Command, args []string) (err error) {
			cmd.PrintVersion()
			return cmdr.ErrShouldBeStopException
		}).
		AttachTo(root)
```

> åœ¨æ ‡å¿—çš„ Action å‡½æ•°ä½“ä¸­ï¼Œ`retun cmdr.ErrShouldBeStopException` èƒ½å¤Ÿç«‹å³ç»ˆæ­¢ `cmdr`çš„å¤„ç†å¾ªç¯å¹¶é€€å‡ºåº”ç”¨ç¨‹åºï¼Œå‰©ä½™çš„å‘½ä»¤è¡Œå‚æ•°å°†è¢«æ”¾å¼ƒã€‚

é€šè¿‡ NewBoolå®Œæˆäº†å®šä¹‰çš„æœ€åï¼Œä½ ä¸€å®šè¦ä½¿ç”¨ `AttachTo(parent)` çš„æ–¹å¼å°†è¿™ä¸ªæ ‡å¿—æŒ‚æ¥ç»™æŸä¸ªå‘½ä»¤æˆ–å­å‘½ä»¤ã€‚



#### é»˜è®¤å€¼

`NewBool(defaultValue...)` è¦æ±‚ä¸€ä¸ªï¼ˆç”šè‡³æ˜¯å¤šä¸ªï¼‰å¯é€‰çš„é»˜è®¤å€¼ä½œä¸ºå…¶å‚æ•°ã€‚

ä½†ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å®šä¹‰ä¸€ä¸ªå¸ƒå°”é‡çš„æ ‡å¿—æ€»æ˜¯å¸¦æœ‰ false é»˜è®¤å€¼ï¼Œå› æ­¤å‘½ä»¤è¡Œä¸­çš„ `--falg` æ‰èƒ½ç¿»è½¬å…¶å€¼ä¸º trueã€‚ä¾‹å¤–çš„æƒ…å†µæœ‰ä¸¤ä¸ªï¼š

1. æŒ‰ç…§ POSIX å…¼å®¹æ¥è¯´ï¼Œåœ¨å‘½ä»¤è¡Œä¸­é’ˆå¯¹çŸ­æ ‡å¿—å¯ä»¥é‡‡ç”¨ `-f+` å’Œ `-f-` çš„æ ¼å¼æ¥å¼ºåˆ¶å…¶å€¼ä¸º true å’Œ falseã€‚è¿™æ ·çš„è¯ï¼Œæˆ‘ä»¬å¯ä»¥è¾“å…¥è¿™æ ·çš„å‘½ä»¤è¡Œï¼š`-f+ -f- -f -f+ -f-`ã€‚
2. å¯¹äº Toggleable Flags Group çš„æƒ…å†µï¼Œä¸€ç»„å¯ä»¥åƒ Radio Button ä¸€æ ·ç¿»è½¬çš„æ ‡å¿—ç»„åˆä¸­ï¼Œé€šå¸¸æ€»æ˜¯æœ‰ä¸€ä¸ªæ ‡å¿—å¸¦æœ‰é»˜è®¤çš„ true å€¼ã€‚



#### `Titles(full, short, aliases...)`

`full` æŒ‡å®šäº†æ ‡å¿—çš„é•¿æ ¼å¼æ–‡å­—è¡¨ç¤ºã€‚

`full` ä¸å¯ä»¥ç¼ºçœï¼Œå®ƒåŒæ—¶è¢«ç”¨ä½œ keyPath çš„ä¸€éƒ¨åˆ†ï¼ˆå‚è§ Option Store çš„ keyPathï¼‰ã€‚

ç”±äº Golang çš„é™åˆ¶ï¼Œshort å‚æ•°æ— æ³•è¢«çœå»ï¼Œä½†ä½ å¯ä»¥æŒ‡å®š `""` ç©ºä¸²ç»™å®ƒã€‚



#### `Description(desc, longDesc...)`

é•¿æ ¼å¼çš„æè¿°æ–‡å­—å—æ˜¯å¯é€‰å‚æ•°ï¼Œå¦‚æœæä¾›çš„è¯ï¼Œåœ¨æ ‡å¿—çš„ä¸“å±å¸®åŠ©å±ä¸­ä¼šè¢«æ˜¾ç¤ºå‡ºæ¥ã€‚



#### çŸ­æ ‡å¿—çš„ç»„åˆ

å¯¹äºå¸ƒå°”é‡çš„çŸ­æ ‡å¿—æ¥è¯´ï¼ŒPOSIX è¦æ±‚å®ƒä»¬èƒ½å¤Ÿè¢«ç»„åˆåˆ°iä¸€èµ·ã€‚å…¶å«ä¹‰æ˜¯ï¼š

```
-azro ç­‰ä»·äº -a -z -r -oï¼Œæˆ–è€…ç­‰ä»·äº -a -zr -o
```



##### cmdr çš„å¢å¼º

1. cmdr çš„çŸ­æ ‡å¿—ä¸ä¼šè¢«é™å®šåœ¨å•ä¸ªå­—æ¯ã€‚

   æˆ‘ä»¬æ”¯æŒå¤šä¸ªå­—æ¯æ•°å­—ç¬¦å·ä½œä¸ºçŸ­æ ‡å¿—ã€‚

   æ¢å¥è¯è¯´ï¼Œä½ å¯ä»¥ä»¤é•¿çŸ­æ ‡å¿—çš„ç•Œé™æ¨¡ç³Šï¼Œä»è€Œæä¾›åŒæ—¶å…¼å®¹äº golang flag é£æ ¼å’Œ getopt é£æ ¼çš„æ ‡å¿—é›†åˆã€‚

   > Golang flag é£æ ¼ï¼šå‘½ä»¤è¡Œå‚æ•°æ€»æ˜¯å•çŸ­æ¨ªçº¿å¼•å¯¼çš„ï¼Œå¦‚ï¼š`-host abc -port 9999`
   >
   > getopt é£æ ¼ï¼šå…è®¸å•ã€åŒçŸ­æ¨ªçº¿å¼•å¯¼ï¼Œåˆ†åˆ«ä»£è¡¨çŸ­ã€é•¿æ ‡å¿—ï¼Œé€šå¸¸çŸ­æ ‡å¿—ä½¿ç”¨å•ä¸ªå­—æ¯æˆ–æ•°å­—ï¼Œå¦‚ï¼š`-d -t --retry 3`ã€‚
   >
   > cmdr é£æ ¼ï¼šåœ¨å®Œå…¨å…¼å®¹ getopt é£æ ¼çš„åŸºç¡€ä¸Šï¼Œé€šè¿‡è§£é™¤å•å­—æ¯çŸ­æ ‡å¿—é™åˆ¶ï¼Œä½¿å¾— cmdr cli app ä¹Ÿèƒ½æ”¯æŒ `-host abc` è¿™æ ·çš„ golang flag é£æ ¼ï¼Œç”šè‡³æ˜¯ `-host abc --retry 3` è¿™æ ·çš„æ··åˆé£æ ¼ï¼ˆwget é‡‡ç”¨è¿™æ ·çš„æ··åˆæ€§é£æ ¼ï¼‰

2. åœ¨æ— æ­§ä¹‰çš„æƒ…å†µä¸‹ï¼Œcmdrç”šè‡³æ”¯æŒä½ ç»„åˆä»»ä½•çŸ­æ ‡å¿—ã€‚

   æ‰€ä»¥ï¼Œ`-dr3t` èƒ½å¤Ÿè¢«è§£é‡Šä¸º `--debug --retry 3 --timeout`ã€‚

   cmdr é‡‡å–ç‰¹åˆ«çš„åå‘å›æº¯ç®—æ³•æ¥è§£å†³è¿™ä¸ªåœºæ™¯ä¸‹çš„å¤šçº§å­å‘½ä»¤çš„å¤šçº§æ ‡å¿—çš„æ™ºèƒ½åŒ¹é…ã€‚



### String

```go
	cmdr.NewString("localhost").
    Titles("host", "host").Description("some desc")
    Placeholder("HOST").
		Group(cStartup).
		AttachTo(root)
```

è¿™ä¸ªæ ‡å¿—åœ¨å¸®åŠ©å±ä¸­çš„è¾“å‡ºä¸ºï¼š

```bash
  -host,  --host=HOST           some desc
```



#### å ä½ç¬¦ï¼ˆPlaceholderï¼‰

å ä½ç¬¦ `HOST` è¢«åº”ç”¨åˆ°é•¿æ ‡é¢˜çš„è¡¨è¾¾å½¢å¼ä¸Šã€‚

åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥æ—¶ï¼Œä»¥ä¸‹çš„æ ¼å¼éƒ½æ˜¯æœ‰æ•ˆçš„ï¼š

```bash
--host=localhost
--host localhost
--hostlocalhost
```

è¿™äº›æ ¼å¼ä¸­ï¼Œå•å¼•å·æˆ–åŒå¼•å·åŒ…å›´å…·ä½“å€¼å‡ä¸ºæœ‰æ•ˆå½¢å¼ï¼Œå¦‚ `--host'localhost'`ã€‚



#### è‡ªåŠ¨åŒ–çš„æ•°å€¼æ‹†ç®±

`cmdr.GetXXX` å‡½æ•°å°†ä¼šä» `Option Store` ä¸­æŠ½å‡ºä¸€ä¸ªé€‰é¡¹/æ ‡å¿—å€¼ï¼ŒæŒ‰ç…§ä½ æœŸå¾…çš„æ•°æ®ç±»å‹ï¼Œå¿…è¦æ—¶ GetXXX ä¼šè‡ªåŠ¨è¿›è¡Œæ‹†ç®±å¤„ç†ã€‚ä¾‹å¦‚å½“ä½ æŠ½å–å€¼ `1,2,3,4` æ—¶ï¼ŒGetStringä¼šå–å¾—ä¸€ä¸ªé€—å·åˆ†éš”çš„åˆ—è¡¨ï¼Œè€Œ GetIntSlice ä¼šå–å¾— `[]int{1,2,3,4}`ã€‚







### Int, Int64, Uint, Uint64

```go
	cmdr.NewInt(2).
    Titles("retry", "r", "retry-times").Description("retry times")
    Placeholder("COUNT").
		Group(cStartup).
		AttachTo(root)
```



### Float32, Float64

```go
	cmdr.NewFloat32(3.14).
    Titles("pi", "pi").Description("PI")
		Group(cStartup).
		AttachTo(root)
```





### Complex64, Complex128

```go
  cmdr.NewComplex64(3.14+5i).
    Titles("pi", "pi").Description("PI")
	  Group(cStartup).
	  AttachTo(root)
```



### Duration

```go
  cmdr.NewDuration(3*time.Second).
    Titles("period", "p").Description("period")
	  Group(cStartup).
	  AttachTo(root)
```

åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ `3s`ï¼Œ`8m20s` ç­‰è¿™æ ·çš„è¯­æ³•ï¼Œå®ƒä»¬å°†ä¼šç¿»è¯‘ä¸ºç­‰ä»·çš„ `time.Duration` å€¼ã€‚



### String Slice

```go
  cmdr.NewStringSlice("s1", "s2", "s3").
    Titles("add", "a").Description("add classes")
	  Group(cStartup).
	  AttachTo(root)
```

å¯¹äºæ‰€æœ‰ Slice æ•°ç»„æ•°æ®ç±»å‹æ¥è¯´ï¼Œå‘½ä»¤è¡Œè¾“å…¥å…è®¸ä¸¤ç§å½¢å¼ï¼š

1. å¤šæ¬¡è¾“å…¥ï¼š`-a s1 -a s2 -a s3`
2. é€—å·åˆ†éš”ï¼š`-a s1,s2,s3`

åŒæ—¶ä¹Ÿå…è®¸ä¸Šè¿°ä¸¤ç§å½¢å¼ä»»æ„ç»„åˆã€‚



### Int Slice, Uint Slilce

```go
  cmdr.NewIntSlice(1, 2, 3).
    Titles("add", "a").Description("add classes")
	  Group(cStartup).
	  AttachTo(root)
```



## Values From

ï¼ˆTODOï¼‰



### from the Environment

ï¼ˆTODOï¼‰

:::tip 

See Also: <https://github.com/hedzr/cmdr-examples/blob/master/examples/envvars>

:::





### from config files

ï¼ˆTODOï¼‰

:::tip 

See Also: <https://github.com/hedzr/cmdr-examples/blob/master/examples/configfile>

:::





### from Config Center



ï¼ˆTODOï¼‰





## More



### `DefaultValue(val interface{}, placeholder string)`

`DefaultValue` å¯ä»¥ä¸ºæ ‡å¿—è®¾å®šä¸€ä¸ªç›¸åº”çš„é»˜è®¤å€¼ã€‚å¦‚æœæ²¡æœ‰è¿™æ ·æ˜¾å¼åœ°è®¾å®šè¿‡ï¼Œé»˜è®¤å€¼å°†ä¼šä¿æŒé›¶å€¼çŠ¶æ€ï¼ˆ`reflect.IsZero()`)ã€‚å¦‚æœæœ‰éé›¶å€¼çš„é»˜è®¤å€¼è®¾å®šï¼Œåœ¨å¸®åŠ©å±ä¸­ä¼šæœ‰ `default placeholder=defaultValue` çš„åç¼€æ˜¾ç¤ºã€‚

åŒæ—¶ä½ ä¹Ÿéœ€è¦æŒ‡å®šä¸€ä¸ª Placeholder çŸ­è¯­ï¼Œæˆ–è€…ä»¤å…¶ä¸ºç©ºä¸²ã€‚å¦‚æœå…·æœ‰æœ‰æ•ˆåœ°å ä½ç¬¦çŸ­è¯­ï¼Œåˆ™åœ¨å¸®åŠ©å±ä¸­ï¼Œè¯¥æ ‡å¿—çš„é•¿é€‰é¡¹ä¼šè¢«æ‰“å°ä¸º `--long=placeholder` çš„å¼æ ·ï¼š

```bash
  -p,  --port=PORT            Consul port (default PORT=8500)
```

å…¶å®šä¹‰ä¸ºï¼š

```go
	cmdr.NewInt(8500).Titles( "port", "p").
		Description("Consul port", "").
		Group("").
		Placeholder("PORT").
		AttachTo(mx)
```





### `Deprecated(deprecation string)`

è¯·çœ‹æˆªå›¾ï¼š

![image-20200720085008948](https://i.loli.net/2020/07/20/cbhykDz31GfsRPW.png)

ä¸€èˆ¬æ¥è¯´ï¼Œ`deprecation` åº”è¯¥æ˜¯ä»¥ç‰ˆæœ¬å·å¼€å§‹çš„ï¼Œå› ä¸ºæ‰“å°æ—¶çš„æ ·å¼ä¼šè‡ªåŠ¨é™„åŠ  `"deprecated "` å‰ç¼€ï¼Œä¸ºäº†æ–‡ç†é€šé¡ºï¼Œä½ éœ€è¦è¿™æ ·æ„é€  `deprecation`ã€‚å¦‚æœæœ‰å¿…è¦ï¼Œä¹Ÿå¯ä»¥æ·»åŠ æ›´å¤šæ–‡å­—ç»™å®ƒã€‚

å…¶å®šä¹‰ä¸ºï¼š

```go
	cmdr.NewStringSlice("quick", "fox", "jumps").
		Titles("string-slice-value", "ssv").
		Description("A string slice flag: ", ``).
		Group("8200.Array").
		EnvKeys("").
		Deprecated("1.2.1").
		Examples(``).
		AttachTo(parent)
```



### `Description(oneLineDesc string, longDesc ...string)`

`oneLineDesc` ä¼šè¢«æ˜¾ç¤ºä¸ºæ­£å¸¸çš„æ ‡å¿—è¡Œçš„ååŠéƒ¨åˆ†ã€‚

`longDesc` å¯ä»¥åœ¨è¯¥æ ‡å¿—çš„ç‹¬ç«‹å¸®åŠ©å±ä¸­è¢«å±•ç¤ºï¼Œä»¥æä¾›æ›´ç»†è‡´çš„æ–‡æ¡£ã€‚ä½†å½“å‰ `cmdr` å¹¶æœªæ”¯æŒæ ‡å¿—çš„ç‹¬ç«‹å¸®åŠ©å±ï¼Œæ‰€ä»¥è¿™ä¸ªå­—æ®µæš‚æ— å®é™…ç”¨å¤„ã€‚



### `Examples(examples string)`

å’Œ `longDesc` ç±»ä¼¼ï¼Œç”±äºå½“å‰ `cmdr` å¹¶æœªæ”¯æŒæ ‡å¿—çš„ç‹¬ç«‹å¸®åŠ©å±ï¼Œæ‰€ä»¥è¿™ä¸ªå­—æ®µæš‚æ— å®é™…ç”¨å¤„ã€‚



### `ExternalTool(envKeyName string)`

å¤–éƒ¨å·¥å…·æŒ‡å®šçš„æ˜¯ä¸€ä¸ªç¯å¢ƒå˜é‡åï¼Œä¾‹å¦‚ `EDITOR`ã€‚

é€šå¸¸è¯¥æ ‡å¿—å¿…é¡»æ¥å— string å€¼ï¼Œåˆæˆ–è€…èƒ½æ— æ­§ä¹‰åœ°æ¥å—åˆ°å­—ç¬¦ä¸²è½¬æ¢åˆ°è¯¥æ ‡å¿—å€¼ã€‚

å½“è¯¥æ ‡å¿—åœ¨å‘½ä»¤è¡Œä¸­è¢«æŒ‡å®šæ—¶ä¸”ä¸º `cmdr` æ‰€è¯†åˆ«æ—¶ï¼Œç¯å¢ƒå˜é‡çš„å…·ä½“å€¼å°†è¢«è§†ä¸ºä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ E å¹¶è¢«é€šè¿‡ `os.Exec()` æ‰€æ‰§è¡Œã€‚cmdr çº¦å®šè¯¥æ‰§è¡Œæ–‡ä»¶ E ä¼šæ¥å—ç”¨æˆ·è¾“å…¥ I<sub>1</sub> æˆ–è€…ç”¨æˆ·æŒ‡å®šçš„è¾“å…¥ I<sub>2</sub>ï¼Œå¹¶ä»¥é€‚å½“çš„æ ¼å¼åœ¨æ‰§è¡Œæ–‡ä»¶ E æ‰§è¡Œå®Œæ¯•åé€šè¿‡ ä¸€ä¸ªç‰¹å®šçš„ä¸´æ—¶æ–‡ä»¶ å±•ç¤ºå‡ºè¯¥è¾“å…¥å€¼ Vï¼Œæœ€åå°† V è®¾å®šä¸ºè¯¥æ ‡å¿—çš„è¡¨ç¤ºå€¼ã€‚

è¯´èµ·æ¥å¤æ‚ï¼Œä½ å¯ä»¥å°†å…¶è§†ä½œ `git commit` çš„ `-m` çš„ä¸€ç§å®ç°æ–¹å¼ï¼š

```go
	cmdr.NewString().Titles("message", "m", "msg").
		Description("the message requesting.", "").
		Group("").
		Placeholder("MESG").
		ExternalTool(cmdr.ExternalToolEditor).
		AttachTo(mx)
```



:::tip

è¯·åœ¨ bash-like/*Linux*-like çš„ç¯å¢ƒä¸­ä½¿ç”¨ï¼Œå°šæœªåœ¨ Windows/PowerShell ä¸­å®é™…æµ‹è¯•è¿‡

:::



:::tip

`cmdr.ExternalToolEditor`

è¿™æ˜¯ "EDITOR" å­—ä¸²å€¼çš„å¸¸é‡åï¼Œå¯ä»¥ç›´æ¥å–ç”¨

:::

:::tip 

See Also: <https://github.com/hedzr/cmdr-examples/blob/master/examples/editor-tool>

:::







### `HeadLike(enable bool, min, max int64)`

å¯ä»¥ä»¿ç…§ [head(1)](https://linux.die.net/man/1/head) çš„å‘½ä»¤è¡Œç•Œé¢ã€‚

head å‘½ä»¤å…è®¸ä½ ç›´æ¥æŒ‡å®šä¸€ä¸ªæ•°å­—ä½œä¸ºæ ‡å¿—è¾“å…¥ã€‚ä¾‹å¦‚ `head -9` å®é™…ä¸Šè¡¨ç¤º `head --lines 9` çš„å«ä¹‰ã€‚æ‰€ä»¥ä¸€ä¸ªç­‰ä»·çš„ cmdr æ ‡å¿—å¯ä»¥è¿™æ ·å®šä¹‰ï¼š

```go
	cmdr.NewInt(1).Titles( "head", "n").
		Description("the head lines.", "").
		Group("").
		Placeholder("LINES").
		HeadLike(true, 1, 3000).
		AttachTo(mx)
```

:::tip

å¾ˆæ˜¾ç„¶ï¼Œåœ¨æ•´ä¸ªå‘½ä»¤è¡Œè¾“å…¥å†…å®¹ä¸­ï¼Œåªèƒ½æœ‰ä¸€æ¬¡ `-number` çš„è¾“å…¥ã€‚

æ‰€ä»¥ä¸ºäº†é¿å…æ­§ä¹‰ï¼Œä½ éœ€è¦ä¿è¯ HeadLike æ ‡å¿—åœ¨å­å‘½ä»¤çš„åå‘å›æº¯é“¾æ¡ä¸­æ˜¯ä¸ä¼šè¢«å¤šæ¬¡å®šä¹‰çš„ã€‚

ç”±äº cmdr ä¼šåå‘å›æº¯å­å‘½ä»¤çš„æ‰€æœ‰ä¸Šçº§å‘½ä»¤ï¼Œå¹¶å°è¯•è§£å†³ä¸€ä¸ªæœ€ä½³çš„æ ‡å¿—åŒ¹é…ï¼Œæ‰€ä»¥å¦‚æœæœ‰é‡å¤çš„æ ‡å¿—çš„è¯ï¼Œä¾ç…§åŒ¹é…é¡ºåºæ¥è¯´ï¼Œä¸Šçº§å‘½ä»¤çš„é‡å¤æ ‡å¿—å°†ä¼šè¢«æ©ç›–è€Œæ— æ³•èµ·åˆ°ä½œç”¨ã€‚

:::

:::tip

`min`ï¼Œ`max` ä¿ç•™ä¸ºå°†æ¥ç›®çš„

:::

:::tip 

See Also: <https://github.com/hedzr/cmdr-examples/blob/master/examples/head-like>

:::





### `Hidden(hidden bool)`

`Hidden(true)` ä¼šç¦æ­¢æ ‡å¿—è¢«æ˜¾ç¤ºåœ¨å¸®åŠ©å±ä¸­ã€‚



### `Placeholder(placeholder string)`

å ä½ç¬¦çš„ç”¨é€”å¯ä»¥å‚è€ƒ `DefaultValue(val, placeholder)` ä¸­çš„æè¿°ã€‚



### `ToggleGroup(group string)`

`ToggleGroup()` å°†æ ‡å¿—çº³å…¥ä¸€ä¸ªå¯ä»¥ç¿»è½¬çš„é€‰é¡¹ç»„ä¸­ï¼Œä½¿å¾—è®¾å®šå…¶ä¸­ä¸€ä¸ªæ ‡å¿—æ—¶ï¼Œå…¶ä»–åŒç»„çš„æ ‡å¿—çš„å€¼è‡ªåŠ¨è¢«ç¿»è½¬ã€‚

è¿™ä¸ªè¡¨ç°å¦‚åŒ GUI ç•Œé¢ä¸­çš„ RadioButtonGroupã€‚

æ‰€ä»¥ `ToggleGroup` æ‰€æŒ‡å®šçš„æ ‡å¿—å¿…é¡»æ˜¯ NewBool() åˆ›å»ºçš„å¸ƒå°”é‡ã€‚å¦‚éå¦‚æ­¤ï¼Œcmdr ä¸ä¼šæŠ¥é”™ï¼Œä½†å…¶åŠŸèƒ½ä¸ä¼šè¢«æœ‰æ•ˆå±•ç°ã€‚

å¯ä»¥è¿™æ ·å®šä¹‰ä¸€ä¸ª ToggleGroupï¼š

```go
	cmdr.NewBool(false).Titles("echo", "echo").Description("using 'echo' mux").ToggleGroup("mux-type").Group("Mux").AttachTo(c)
	cmdr.NewBool(false).Titles("gin", "gin").Description("using 'gin' mux").ToggleGroup("mux-type").Group("Mux").AttachTo(c)
	cmdr.NewBool(false).Titles("gorilla", "gorilla").Description("using 'gorilla' mux").ToggleGroup("mux-type").Group("Mux").AttachTo(c)
	cmdr.NewBool(true).Titles("iris", "iris").Description("using 'iris' mux").ToggleGroup("mux-type").Group("Mux").AttachTo(c)
	cmdr.NewBool(false).Titles("std", "std").Description("using standardlib http mux mux").ToggleGroup("mux-type").Group("Mux").AttachTo(c)
```

æŒ‰ç…§å¸¸ç†ï¼Œåœ¨è¿™ç»„æ ‡å¿—ä¸­ï¼Œè‡³å°‘æœ‰ä¸€ä¸ªæ ‡å¿—åº”è¯¥å…·æœ‰é»˜è®¤å€¼ trueã€‚

:::tip 

See Also: <https://github.com/hedzr/cmdr-examples/blob/master/examples/toggle-group>

:::





### `ValidArgs(list ...string)`

ValidArgs æä¾›ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„ç”¨äºå¯¹æ ‡å¿—çš„å‘½ä»¤è¡Œè¾“å…¥å€¼è¿›è¡Œæ ¡éªŒï¼Œä»è€Œæ„æˆä¸€ç§æšä¸¾é‡çš„è¾“å…¥ç•Œé¢ã€‚ä¾‹å¦‚ï¼š

```go
	cmdr.NewString().Titles("fruit", "fr").
		Description("the message.", "").
		Group("").
		Placeholder("FRUIT").
		ValidArgs("apple", "banana", "orange").
		AttachTo(mx)
```

:::tip 

é»˜è®¤æ—¶ï¼Œå½“ç”¨æˆ·è¾“å…¥æ— æ•ˆå€¼æ—¶ï¼Œå°†ä¼šè¢«è‡ªåŠ¨å¿½ç•¥ã€‚

å¦‚æœæƒ³è¦å¾—åˆ°ä¸€ä¸ªé”™è¯¯æç¤ºï¼Œå¯ä»¥ä½¿ç”¨ `cmdr.WithIgnoreWrongEnumValue(ignore = true)` æ–¹å¼æ¥è°ƒç”¨ `cmdr.Exec(root, opts...`)ï¼Œè¿™å°†ä¼šå¯¼è‡´ç”¨æˆ·æ— æ•ˆè¾“å…¥è¢«æŠ›å‡ºä¸º `cmdr.errWrongEnumValue`ï¼Œä½ å¯ä»¥åœ¨æ­¤åŸºç¡€ä¸Šè€ƒè™‘æ‹¦æˆªè¯¥é”™è¯¯å¹¶å†å¤„ç†ã€‚

![image-20200720111415976](https://i.loli.net/2020/07/20/GBRxCVg72fjoIrH.png)

:::

:::tip 

See Also: <https://github.com/hedzr/cmdr-examples/blob/master/examples/valid-args>

:::



### Required(required...bool)

å¦‚æœçœå´å‚æ•°ï¼Œåˆ™ç­‰ä»·äº `Required(true)`ï¼Œå¦åˆ™åˆ™æŒ‰å®é™…å‚æ•°ä¸ºå‡†ã€‚

```go
	cmdr.NewString().
		Titles("required", "required").
		Description("A required flag", "").
		Required().
		AttachTo(parent)

	cmdr.NewString().
		Titles("required2", "required2").
		Description("The required flag 2", "").
		Required(false, true, false, true).
		AttachTo(parent)
```

å¯¹äºæ ‡è®°ä¸º required çš„æ ‡å¿—ï¼Œå¦‚æœç”¨æˆ·æ²¡æœ‰åœ¨å‘½ä»¤è¡Œæ˜¾å¼åœ°æä¾›å‚æ•°å€¼ï¼Œåˆ™ä¼šå¯¼è‡´ä¸€ä¸ªé”™è¯¯è¢«æŠ›å‡ºã€‚å¦‚æœä½ æ ‡è®°äº†å¤šä¸ªå¿…éœ€çš„æ ‡å¿—ï¼Œåˆ™å®ƒä»¬ä¼šè¢«ä¸€ä¸€ç½—åˆ—åœ¨é”™è¯¯ä¿¡æ¯ä¸­ã€‚ä½ å¯ä»¥è€ƒè™‘æ‹¦æˆªè¯¥é”™è¯¯åè‡ªè¡Œå†³å®šè¾“å‡ºçš„æ–‡æœ¬å†…å®¹ï¼Œå¦åˆ™å¦‚æœé‡‡ç”¨ `logrus.Fatalf("error: %v", err)` ä¼šå¾—åˆ°ç±»ä¼¼äºè¿™æ ·çš„è¾“å‡ºï¼š

![image-20200724141654339](https://i.loli.net/2020/07/24/6kMyWwacIlXU4Ai.png)



:::tip 

éœ€è¦ `cmdr` v1.6.51

:::







## Option Store é…ç½®æ•°æ®

Option Store ä¸­çš„é…ç½®æ•°æ®æ¥è‡ªè¿™äº›åœ°æ–¹ï¼š

- é€šè¿‡ `cmdr.NewBool`, `cmdr.NewString` ç­‰æ¥å£å®šä¹‰çš„å‘½ä»¤è¡Œæ ‡å¿—ä¿¡æ¯ä¸­æä¾›çš„ç¼ºçœå€¼ã€‚ä¾‹å¦‚ï¼š

  ```go
  	cmdr.NewBool(false).
  		Titles("enable-ueh", "ueh").
  		EnvKeys("ENABLE_UEH").
  		Description("Enables the unhandled exception handler?").
  		AttachTo(root)
  ```

  è¿™é‡Œå®šä¹‰äº†ä¸€ä¸ª Bool ç±»å‹çš„æ ‡å¿—ï¼ˆFlagï¼‰ï¼Œå…¶é»˜è®¤å€¼ä¸º falseï¼Œå¦‚æœç»ˆç«¯ç”¨æˆ·æ²¡æœ‰ä½œå‡ºæŒ‡å®šï¼Œåˆ™ Option Store ä¸­ä¼šåŒ…å«è¯¥æ¡ç›®ä¸”å…·æœ‰ bool å€¼ falseã€‚ä½ å¯ä»¥é€šè¿‡ `cmdr.GetBoolR('enable-ueh')` å–å¾—è¯¥å€¼ã€‚

  > æ ‡å¿—æ€»æ˜¯å¸¦æœ‰é»˜è®¤å€¼ falseï¼Œä¸€èˆ¬è¾ƒå°‘ä¼šä½¿ç”¨ trueå€¼ã€‚
  >
  > Toggleable Flags Group ä¾‹å¤–ï¼Œé€šå¸¸åœ¨ç»„é‡Œä¼šæœ‰ä¸€ä¸ª Flag å…·æœ‰é»˜è®¤å€¼ trueã€‚

- é€šè¿‡å‘½ä»¤è¡Œå‚æ•°æŒ‡å®šçš„ã€‚ä¾‹å¦‚ï¼š

  ```bash
  $ go run ./cli --enable-ueh
  ```

  è¿™é‡Œä¼šé€šè¿‡å‘½ä»¤è¡Œå°† enable-ueh çš„å€¼è®¾ç½®ä¸º trueã€‚

  æ­¤æ—¶ï¼Œé€šè¿‡ `cmdr.GetBoolR('enable-ueh')` å–å¾—çš„å€¼å°†ä¼šä¸º trueã€‚

- é€šè¿‡ç¯å¢ƒå˜é‡æŒ‡å®šçš„ã€‚ä¾‹å¦‚ï¼š

  ```bash
  ENABLE_UEH=1 go run /cli
  ```

  å¦‚æœåœ¨å®šä¹‰ Flag æ˜¯æ²¡æœ‰é€šè¿‡ `.EnvKeys()` æŒ‡å®šç¯å¢ƒå˜é‡åï¼Œ`cmdr` ä¼šè¯•å›¾æŸ¥æ‰¾è‡ªåŠ¨åŒ–å‘½åçš„ç¯å¢ƒå˜é‡åã€‚ä¾‹å¦‚æ­¤ä¾‹ä¸­ï¼Œè‡ªåŠ¨åŒ–çš„ç¯å¢ƒå˜é‡ååº”è¯¥æ˜¯ `APP_ENABLE_UEH`ï¼Œè¯·å‚è€ƒ `cmdr.WithEnvPrefix()` çš„ç›¸å…³è¯´æ˜ã€‚

- é€šè¿‡é…ç½®æ–‡ä»¶è£…å…¥çš„ã€‚ä¾‹å¦‚åœ¨ä¸»é…ç½®æ–‡ä»¶ä¸­åŒ…å«æœ‰å¦‚ä¸‹æ¡ç›®ï¼š

  ```yaml
  app: # è¿™æ˜¯é…ç½®æ–‡ä»¶çš„å‰ç¼€ï¼Œå¯ä»¥é€šè¿‡ cmdr.WithOptionsPrefix() è‡ªå®šä¹‰
    simple: # è¿™æ˜¯é€šè¿‡ cmdr.Root(appName, version) æ‰€æŒ‡å®šçš„åº”ç”¨ç¨‹åºå
      enable-ueh: true   # å­—æ®µåç§°åº”è¯¥ç­‰äº Flag çš„ Full å­—æ®µå€¼
  
  ```

- é€šè¿‡ `cmdr.Set(keyPath, value)` è®¾ç½®çš„ã€‚



### Kilo-bytes

:::tip 

See Also: <https://github.com/hedzr/cmdr-examples/blob/master/examples/kilo-bytes>

:::



## 











ğŸ”š



